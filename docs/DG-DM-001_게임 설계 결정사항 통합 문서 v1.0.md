# [DG-DM-001] 게임 설계 결정사항 통합 문서 v1.0

> 문서 번호: HIMITU-DG-DM-001
> 
> **버전**: 1.0
> 
> **작성일**: 2025-01-09
> 
> **작성자**: 수삼 (AI 지원)
> 
> **대상**: 찰스 (DG 담당)
> 
> **목적**: D-G-001 ~ D-G-021 문서의 모든 결정 필요 사항을 한눈에 파악하고 결정할 수 있도록 통합

---

## 📌 이 문서의 사용법

### ✅ 빠른 시작

1. *[1. 긴급 결정 사항]**부터 확인 → 즉시 결정 필요
2. 각 항목의 **배경**을 읽고 상황 파악
3. **선택지**를 검토하고 장단점 비교
4. **영향 범위**를 확인하여 파급 효과 예측
5. 결정 후 해당 원본 문서에 반영

### 📊 우선순위 구분

- 🔴 **긴급** (Phase 1): 구현 전 반드시 결정 필요
- 🟡 **중요** (Phase 2): MVP 출시 전 결정 필요
- 🟢 **일반** (Phase 3): 플레이테스트 후 조정 가능

---

## 1. 🔴 긴급 결정 사항 (Phase 1)

### 1-1. 타일 합병 인접 정의

**원본 문서**: D-G-007 (타일 시스템)

### 배경

타일을 드래그하여 합병할 때, 어떤 위치의 타일을 "인접"으로 볼 것인가?

### 선택지

### 옵션 A: 직교만 (상하좌우 4방향) ⭐ **현재 설계**

```
    [ ]
[X] [A] [X]
    [ ]

```

- **장점**
    - 직관적이고 명확한 룰
    - 터치 오조작 최소화 (대각선 실수 방지)
    - 모바일 UI에서 드래그 방향 명확
- **단점**
    - 전략적 선택지 다소 제한적
    - 촘촘한 배치 시 합병 기회 감소

### 옵션 B: 8방향 (대각선 포함)

```
[X] [X] [X]
[X] [A] [X]
[X] [X] [X]

```

- **장점**
    - 더 많은 합병 조합 가능
    - 전략적 깊이 증가
- **단점**
    - 모바일에서 대각선 드래그 오조작 우려
    - "이게 인접인가?" 헷갈림 가능성

### 영향 범위

- `TileSystem.canMerge()` 로직
- UI 피드백 (합병 가능 하이라이트)
- 튜토리얼 설명 내용

### 권장 사항

**옵션 A (직교만)** 추천

- 모바일 터치 인터페이스 특성상 직교가 안전
- 게임 초반 학습 곡선 완만
- 추후 "특수 합병 아이템" 등으로 확장 가능

---

### 1-2. Day Phase 저장 시점

**원본 문서**: D-G-019 (저장/로드 시스템)

### 배경

Wave 진행 중(Day Phase)에 게임을 종료하면 어떻게 저장할 것인가?

### 선택지

### 옵션 A: Night Phase로 자동 복귀 후 저장 ⭐ **현재 설계**

```
[Day 진행 중 종료]
    ↓
[즉시 Night Phase로 전환]
    ↓
[Night 상태로 저장]
    ↓
[재접속 시 Night에서 시작]

```

- **장점**
    - 구현 단순 (Day 진행 상태 저장 불필요)
    - 유저가 안전한 상태에서 재시작
    - Wave 실패 회피 수단 방지
- **단점**
    - Wave 진행 상황 손실
    - "잠깐만 나갔다왔는데 리셋됨" 불만 가능

### 옵션 B: Day 상태 그대로 저장

```
[Day 진행 중 종료]
    ↓
[현재 Wave 상태 저장]
    ↓
[재접속 시 이어서 진행]

```

- **장점**
    - 진행 상황 보존
    - 유저 편의성 높음
- **단점**
    - 구현 복잡도 증가
    - 몬스터 위치/상태 등 모두 저장 필요
    - 버그 발생 시 게임 진행 불가 리스크

### 영향 범위

- `SaveManager.save()` 로직
- `GameInitializer.loadGame()` 복원 로직
- Phase 전환 흐름

### 권장 사항

**옵션 A (Night 복귀)** 추천

- MVP에서는 안정성 우선
- 추후 "일시정지" 기능으로 개선 가능
- 유저에게 "Wave 중에는 저장되지 않습니다" 명시

---

### 1-3. 타일 사거리 기준

**원본 문서**: D-G-008 (전투 시스템)

### 배경

타워가 몬스터를 공격할 때 사거리를 어떻게 계산할 것인가?

### 선택지

### 옵션 A: 맨해튼 거리 (Manhattan) ⭐ **현재 설계**

```
거리 = |col1 - col2| + |row1 - row2|

예시: 궁수탑 사거리 2
    [2]
[2] [1] [2]
    [T]
    [1]
    [2]

```

- **장점**
    - 그리드 기반 게임에 자연스러움
    - 계산 간단 (정수 연산)
    - 시각적으로 명확
- **단점**
    - 대각선 거리가 멀게 계산됨

### 옵션 B: 유클리드 거리 (Euclidean)

```
거리 = sqrt((col1-col2)² + (row1-row2)²)

예시: 궁수탑 사거리 2
[1.4][1][1.4]
 [1] [T] [1]
[1.4][1][1.4]

```

- **장점**
    - 실제 거리에 가까움
    - 대각선도 동등하게 처리
- **단점**
    - 계산 부하 (제곱근)
    - 그리드에서 시각적으로 이해하기 어려움

### 옵션 C: 체스보드 거리 (Chebyshev)

```
거리 = max(|col1-col2|, |row1-row2|)

예시: 궁수탑 사거리 2
[2][2][2][2][2]
[2][1][1][1][2]
[2][1][T][1][2]
[2][1][1][1][2]
[2][2][2][2][2]

```

- **장점**
    - 사거리 내 타일 수 많음
    - 8방향 동등
- **단점**
    - 사거리가 너무 넓어질 수 있음

### 영향 범위

- `CombatSystem.calculateDistance()`
- 타워 밸런싱 (사거리 값 조정 필요)
- UI 사거리 표시

### 권장 사항

**옵션 A (맨해튼 거리)** 추천

- 타워 디펜스 장르 표준
- 모바일 그리드 게임에 적합
- 궁수탑(사거리 2), 용병(사거리 1) 설정이 자연스러움

---

## 2. 🟡 중요 결정 사항 (Phase 2)

### 2-1. 손상된 타일 HP 복구 정책

**원본 문서**: D-G-010 (복구 시스템)

### 배경

Wave 클리어 후 복구 시, 파괴되지 않았지만 HP가 깎인 타일을 복구할 것인가?

### 현재 설계

- **파괴된 타일만 복구** (isDestroyed: true → false)
- 손상된 타일(HP < 최대) → 복구 안 함

### 선택지

### 옵션 A: 파괴된 것만 복구 ⭐ **현재**

```
Wave 종료 후:
- isDestroyed: true → false + HP 100% 복구
- HP 50% 타일 → 그대로 50% 유지

```

- **장점**
    - 전략적 긴장감 유지
    - 타일 배치 신중하게 고민
    - Wave 간 누적 피해 개념
- **단점**
    - 유저가 손상 타일 제거→재배치 반복 작업
    - "왜 안 고쳐지지?" 불만 가능

### 옵션 B: 전체 HP 100% 복구

```
Wave 종료 후:
- 모든 타일 HP → 최대값으로 복구

```

- **장점**
    - 유저 편의성 높음
    - 손상 관리 부담 감소
    - 깔끔한 사이클
- **단점**
    - 전략적 깊이 감소
    - "아무렇게나 배치해도 되네" 느낌

### 옵션 C: 골드 소모하여 복구

```
Wave 종료 후:
- 자동 복구 없음
- Night Phase에 골드 지불 → HP 복구 선택

```

- **장점**
    - 경제 시스템 연동
    - 전략적 자원 관리
- **단점**
    - 복잡도 증가
    - MVP에 과도한 기능

### 영향 범위

- `RecoverySystem.recoverTiles()`
- 유저 경험 (타일 관리 부담)
- 난이도 밸런싱

### 권장 사항

**옵션 A (파괴된 것만)** 유지 추천

- Phase 1에서는 현재 설계대로 진행
- 플레이테스트 후 불편 의견 많으면 옵션 B로 전환
- 타일 제거 비용(골드)을 낮춰서 재배치 부담 완화

---

### 2-2. 함정 타일 복구 여부

**원본 문서**: D-G-007 (타일 시스템), D-G-010 (복구 시스템)

### 배경

함정은 일회용인가? 복구 가능한가?

### 현재 설계

- **일회용** (canRecover: false)
- 트리거 후 파괴되면 복구 안 됨

### 선택지

### 옵션 A: 일회용 (복구 불가) ⭐ **현재**

```
함정 트리거 → 파괴 → Wave 끝 → 복구 안 됨

```

- **장점**
    - 전략적 선택의 무게감
    - 경제 시스템 자원 소모처
    - "언제 쓸까?" 고민 재미
- **단점**
    - 유저가 아껴서 안 쓸 수 있음
    - 골드 부족 시 답답함

### 옵션 B: 복구됨

```
함정 트리거 → 파괴 → Wave 끝 → 자동 복구

```

- **장점**
    - 부담 없이 사용 가능
    - 함정 배치 전략 중요도 증가
- **단점**
    - 함정 가격(30골드) 너무 저렴해짐
    - 경제 시스템 약화

### 옵션 C: 골드 지불하여 복구

```
함정 파괴 → Wave 끝 → 반값(15골드)에 복구 가능

```

- **장점**
    - 일회용과 복구의 중간
    - 경제 시스템 유지
- **단점**
    - UI/UX 복잡도 증가

### 영향 범위

- `RecoverySystem` 로직
- 함정 가격 밸런싱
- 유저 함정 사용 패턴

### 권장 사항

**옵션 A (일회용)** 유지 추천

- 함정의 차별화 포인트
- 단, 함정 가격 30골드 → 20골드로 인하 검토
- 또는 "보스 웨이브"에만 사용 권장 유도

---

### 2-3. 롱프레스 인식 시간

**원본 문서**: D-G-012 (입력 처리 시스템)

### 배경

타일 합병 모드 진입을 위한 롱프레스 시간은?

### 현재 설계

- **500ms** (0.5초)

### 선택지

### 옵션 A: 300ms (빠름)

- **장점**: 반응성 좋음, 빠른 플레이 가능
- **단점**: 일반 탭과 구분 어려움, 오조작 증가

### 옵션 B: 500ms (중간) ⭐ **현재**

- **장점**: 탭과 명확히 구분, 대부분 모바일 게임 표준
- **단점**: 약간 답답할 수 있음

### 옵션 C: 700ms (느림)

- **장점**: 오조작 최소화, 명확한 의도 전달
- **단점**: 너무 느림, 답답함

### 영향 범위

- `InputManager.longPressTimer`
- 유저 조작 반응 속도
- 튜토리얼 설명

### 권장 사항

**옵션 B (500ms)** 유지 추천

- 모바일 게임 표준
- 플레이테스트 후 400~600ms 범위에서 미세 조정

---

### 2-4. 난이도 스케일링 배율

**원본 문서**: D-G-011 (웨이브 시스템)

### 배경

웨이브마다 몬스터가 얼마나 강해질 것인가?

### 현재 설계

```jsx
HP 배율 = 1.1^wave  // Wave 10: 2.59배
DMG 배율 = 1.05^wave // Wave 10: 1.63배

```

### 선택지

### 옵션 A: 현재 설계 (HP ×1.1, DMG ×1.05)

- **Wave 10**: HP 259%, DMG 163%
- **Wave 20**: HP 673%, DMG 265%
- **장점**: 초반 완만, 후반 가파름
- **단점**: 플레이테스트 필수

### 옵션 B: 완만 (HP ×1.08, DMG ×1.03)

- **Wave 10**: HP 216%, DMG 134%
- **Wave 20**: HP 466%, DMG 181%
- **장점**: 초보자 친화적
- **단점**: 후반 지루할 수 있음

### 옵션 C: 급격 (HP ×1.15, DMG ×1.08)

- **Wave 10**: HP 405%, DMG 216%
- **Wave 20**: HP 1,637%, DMG 466%
- **장점**: 하드코어 게이머 타겟
- **단점**: 초반 난이도 장벽 높음

### 영향 범위

- `WaveSystem.calculateMonsterStats()`
- 전체 게임 밸런싱
- 타워/건물 필요 레벨

### 권장 사항

**옵션 A (현재)** 유지하되, **플레이테스트 후 조정**

- MVP 출시 → 데이터 수집 → 조정이 현실적
- Wave 5, 10, 15 클리어율 모니터링

---

## 3. 🟢 일반 결정 사항 (Phase 3 / 플레이테스트 후)

### 3-1. 보스 웨이브 주기

**원본 문서**: D-G-011

### 배경

보스 몬스터 등장 주기는?

### 현재 설계

- **5의 배수** (Wave 5, 10, 15...)

### 선택지

- 옵션 A: 5의 배수 (현재)
- 옵션 B: 3의 배수 (더 자주)
- 옵션 C: 랜덤 (예측 불가)

### 권장 사항

**플레이테스트 후 결정** - 유저 피로도 측정 필요

---

### 3-2. 드래그 임계값

**원본 문서**: D-G-012

### 현재 설계

- **10px** (탭과 드래그 구분)

### 권장 사항

**5~20px 범위에서 테스트** - 기기마다 다를 수 있음

---

### 3-3. Phase 전환 애니메이션 시간

**원본 문서**: D-G-006

### 현재 설계

- **1초** (밤↔낮 전환)

### 권장 사항

**0.5~2초 범위에서 조정** - 유저 피드백 반영

---

### 3-4. 자동 저장 간격

**원본 문서**: D-G-019

### 현재 설계

- **3초 디바운스** (변경 후 3초 뒤 저장)

### 대안

- **30초 주기**: 배터리/트래픽 절약

### 권장 사항

**현재 유지** - CloudStorage는 로컬이므로 부담 적음

---

### 3-5. 튜토리얼 다국어 지원

**원본 문서**: D-G-021

### 현재 설계

- **한국어 하드코딩**

### 대안

- **i18n 시스템**: 다국어 지원

### 권장 사항

**Phase 2에서 검토** - MVP는 한국어만

---

## 4. 📋 결정 체크리스트

결정 완료 시 체크하세요:

### 🔴 Phase 1 (긴급)

- [ ] 1-1. 타일 합병 인접 정의 (직교 / 8방향)
- [ ] 1-2. Day Phase 저장 시점 (Night 복귀 / Day 저장)
- [ ] 1-3. 타일 사거리 기준 (맨해튼 / 유클리드 / 체스보드)

### 🟡 Phase 2 (중요)

- [ ] 2-1. 손상된 타일 HP 복구 (파괴만 / 전체)
- [ ] 2-2. 함정 타일 복구 여부 (일회용 / 복구)
- [ ] 2-3. 롱프레스 인식 시간 (300 / 500 / 700ms)
- [ ] 2-4. 난이도 스케일링 배율 (플레이테스트 후 조정)

### 🟢 Phase 3 (일반)

- [ ] 3-1. 보스 웨이브 주기 (플레이테스트 후)
- [ ] 3-2. 드래그 임계값 (테스트 후)
- [ ] 3-3. Phase 전환 애니메이션 시간 (유저 피드백 후)
- [ ] 3-4. 자동 저장 간격 (현재 유지 권장)
- [ ] 3-5. 튜토리얼 다국어 (Phase 2 검토)

---

## 5. 📞 다음 단계

### 결정 후 해야 할 일

1. **Notion에 결정 내용 기록**
    - 각 D-G 문서의 "결정 필요 사항" 섹션 업데이트
    - 버전 번호 증가 (v0.1 → v0.2)
2. **팀원들에게 공유**
    - 슬뚜: UI 임계값, 애니메이션 시간
    - 쵸타: 난이도, 밸런싱 수치
    - 수삼: 저장 로직, 시스템 구현 방향
3. **Constants.js 업데이트**
    - 결정된 수치를 D-G-005 상수 정의서에 반영
4. **개발 우선순위 조정**
    - 결정에 따라 구현 순서 재배치

---

## 6. ❓ 추가 질문이 있다면?

### 각 결정사항에 대해 더 자세한 정보가 필요하다면:

- 원본 문서(D-G-xxx) 참조
- 수삼에게 구체적인 구현 방안 문의
- 쵸타에게 밸런싱 데이터 시뮬레이션 요청

### 새로운 결정사항이 발견되면:

- 이 문서에 섹션 추가
- 버전 업데이트 (v1.1)
- 팀원 재공유

---

## 📝 개정 이력

|버전|날짜|작성자|내용|
|---|---|---|---|
|1.0|2025-01-09|수삼|초안 작성: D-G-001~021 결정사항 통합|

---

## 🎯 핵심 요약

**Phase 1 긴급 결정 3개**만 먼저 결정하면 구현 시작 가능!

1. 타일 합병 인접 정의 → **직교 권장**
2. Day Phase 저장 시점 → **Night 복귀 권장**
3. 타일 사거리 기준 → **맨해튼 거리 권장**

나머지는 구현 중 또는 플레이테스트 후 조정 가능합니다. 💪