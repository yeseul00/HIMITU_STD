<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMA UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸</title>

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #1a1a2e);
            color: var(--tg-theme-text-color, #ffffff);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding-bottom: 80px;
        }

        h1 {
            color: var(--tg-theme-button-color, #4a90e2);
            margin-bottom: 10px;
            font-size: 24px;
        }

        .subtitle {
            color: var(--tg-theme-hint-color, #888);
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            background: var(--tg-theme-secondary-bg-color, #252540);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .section-title {
            color: var(--tg-theme-button-color, #4a90e2);
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        button {
            flex: 1;
            min-width: 100px;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
        }

        button.primary {
            background: var(--tg-theme-button-color, #4a90e2);
            color: var(--tg-theme-button-text-color, white);
        }

        button.success {
            background: #2ecc71;
            color: white;
        }

        button.danger {
            background: #e74c3c;
            color: white;
        }

        button.warning {
            background: #f39c12;
            color: white;
        }

        button.info {
            background: #3498db;
            color: white;
        }

        button:hover {
            opacity: 0.8;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status {
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
            display: none;
        }

        .status.success {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
            color: #2ecc71;
        }

        .status.error {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            color: #e74c3c;
        }

        .status.info {
            background: rgba(74, 144, 226, 0.2);
            border: 1px solid #4a90e2;
            color: #4a90e2;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .badge.success {
            background: #2ecc71;
            color: white;
        }

        .badge.warning {
            background: #f39c12;
            color: white;
        }

        .color-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: var(--tg-theme-bg-color, #1a1a30);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--tg-theme-hint-color, #333);
        }

        .color-label {
            flex: 1;
            margin-left: 12px;
            color: var(--tg-theme-hint-color, #888);
        }

        .color-value {
            font-family: 'Courier New', monospace;
            color: var(--tg-theme-text-color, #fff);
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¨ TMA UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸</h1>
        <p class="subtitle">Telegram Mini App UI ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</p>

        <!-- ìƒíƒœ ë©”ì‹œì§€ -->
        <div id="status" class="status"></div>

        <!-- HapticFeedback -->
        <div class="section">
            <div class="section-title">ğŸ“³ HapticFeedback (ì§„ë™)</div>
            <div class="buttons">
                <button class="info" onclick="hapticLight()">Light</button>
                <button class="primary" onclick="hapticMedium()">Medium</button>
                <button class="warning" onclick="hapticHeavy()">Heavy</button>
            </div>
            <div class="buttons" style="margin-top: 10px;">
                <button class="success" onclick="hapticSuccess()">âœ… Success</button>
                <button class="danger" onclick="hapticError()">âŒ Error</button>
                <button class="warning" onclick="hapticWarning()">âš ï¸ Warning</button>
            </div>
        </div>

        <!-- MainButton -->
        <div class="section">
            <div class="section-title">ğŸ”˜ MainButton (í•˜ë‹¨ ë²„íŠ¼)</div>
            <div class="buttons">
                <button class="success" onclick="showMainButton()">í‘œì‹œ</button>
                <button class="danger" onclick="hideMainButton()">ìˆ¨ê¸°ê¸°</button>
            </div>
            <div class="buttons" style="margin-top: 10px;">
                <button class="primary" onclick="setMainButtonText()">í…ìŠ¤íŠ¸ ë³€ê²½</button>
                <button class="warning" onclick="setMainButtonProgress()">Progress ëª¨ë“œ</button>
            </div>
        </div>

        <!-- BackButton -->
        <div class="section">
            <div class="section-title">â—€ï¸ BackButton (ë’¤ë¡œê°€ê¸°)</div>
            <div class="buttons">
                <button class="success" onclick="showBackButton()">í‘œì‹œ</button>
                <button class="danger" onclick="hideBackButton()">ìˆ¨ê¸°ê¸°</button>
            </div>
        </div>

        <!-- Popups -->
        <div class="section">
            <div class="section-title">ğŸ’¬ íŒì—… (Alert / Confirm)</div>
            <div class="buttons">
                <button class="info" onclick="showAlertPopup()">showAlert</button>
                <button class="primary" onclick="showConfirmPopup()">showConfirm</button>
                <button class="warning" onclick="showPopupDemo()">showPopup (ì»¤ìŠ¤í…€)</button>
            </div>
        </div>

        <!-- ThemeParams -->
        <div class="section">
            <div class="section-title">ğŸ¨ í…Œë§ˆ ìƒ‰ìƒ (ThemeParams)</div>
            <div id="themeColors">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram?.WebApp;

        // ì´ˆê¸°í™”
        function init() {
            if (tg) {
                tg.ready();
                tg.expand();
                showStatus('âœ… TMA í™˜ê²½ì—ì„œ ì‹¤í–‰ ì¤‘', 'success');

                // MainButton í´ë¦­ ì´ë²¤íŠ¸
                tg.MainButton.onClick(() => {
                    showStatus('ğŸ”˜ MainButton í´ë¦­ë¨!', 'info');
                    hapticSuccess();
                });

                // BackButton í´ë¦­ ì´ë²¤íŠ¸
                tg.BackButton.onClick(() => {
                    showStatus('â—€ï¸ BackButton í´ë¦­ë¨!', 'info');
                    hapticMedium();
                    hideBackButton();
                });

                // í…Œë§ˆ ìƒ‰ìƒ í‘œì‹œ
                displayThemeColors();
            } else {
                showStatus('âš ï¸ ì¼ë°˜ ë¸Œë¼ìš°ì € í™˜ê²½ (ì¼ë¶€ ê¸°ëŠ¥ ì œí•œë¨)', 'error');
            }
        }

        // HapticFeedback - Light
        window.hapticLight = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
                showStatus('ğŸ“³ Light ì§„ë™', 'info');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // HapticFeedback - Medium
        window.hapticMedium = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
                showStatus('ğŸ“³ Medium ì§„ë™', 'info');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // HapticFeedback - Heavy
        window.hapticHeavy = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('heavy');
                showStatus('ğŸ“³ Heavy ì§„ë™', 'info');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // HapticFeedback - Success
        window.hapticSuccess = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.notificationOccurred('success');
                showStatus('âœ… Success ì§„ë™', 'success');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // HapticFeedback - Error
        window.hapticError = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.notificationOccurred('error');
                showStatus('âŒ Error ì§„ë™', 'error');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // HapticFeedback - Warning
        window.hapticWarning = function () {
            if (tg?.HapticFeedback) {
                tg.HapticFeedback.notificationOccurred('warning');
                showStatus('âš ï¸ Warning ì§„ë™', 'info');
            } else {
                showStatus('âŒ HapticFeedback ë¯¸ì§€ì›', 'error');
            }
        };

        // MainButton - í‘œì‹œ
        window.showMainButton = function () {
            if (tg?.MainButton) {
                tg.MainButton.setText('MainButton í´ë¦­í•˜ì„¸ìš”');
                tg.MainButton.show();
                showStatus('ğŸ”˜ MainButton í‘œì‹œë¨', 'success');
                hapticMedium();
            } else {
                showStatus('âŒ MainButton ë¯¸ì§€ì›', 'error');
            }
        };

        // MainButton - ìˆ¨ê¸°ê¸°
        window.hideMainButton = function () {
            if (tg?.MainButton) {
                tg.MainButton.hide();
                showStatus('ğŸ”˜ MainButton ìˆ¨ê¹€', 'info');
                hapticMedium();
            } else {
                showStatus('âŒ MainButton ë¯¸ì§€ì›', 'error');
            }
        };

        // MainButton - í…ìŠ¤íŠ¸ ë³€ê²½
        window.setMainButtonText = function () {
            if (tg?.MainButton) {
                const texts = ['í™•ì¸', 'ì €ì¥í•˜ê¸°', 'ë‹¤ìŒ ë‹¨ê³„', 'ì™„ë£Œ', 'MainButton'];
                const randomText = texts[Math.floor(Math.random() * texts.length)];
                tg.MainButton.setText(randomText);
                tg.MainButton.show();
                showStatus(`ğŸ”˜ í…ìŠ¤íŠ¸: "${randomText}"`, 'info');
                hapticLight();
            } else {
                showStatus('âŒ MainButton ë¯¸ì§€ì›', 'error');
            }
        };

        // MainButton - Progress ëª¨ë“œ
        window.setMainButtonProgress = function () {
            if (tg?.MainButton) {
                tg.MainButton.showProgress(true);
                tg.MainButton.show();
                showStatus('â³ Progress ëª¨ë“œ í™œì„±í™”', 'info');

                setTimeout(() => {
                    tg.MainButton.hideProgress();
                    showStatus('âœ… Progress ì™„ë£Œ', 'success');
                    hapticSuccess();
                }, 3000);
            } else {
                showStatus('âŒ MainButton ë¯¸ì§€ì›', 'error');
            }
        };

        // BackButton - í‘œì‹œ
        window.showBackButton = function () {
            if (tg?.BackButton) {
                tg.BackButton.show();
                showStatus('â—€ï¸ BackButton í‘œì‹œë¨ (í´ë¦­í•˜ë©´ ìˆ¨ê²¨ì§)', 'success');
                hapticMedium();
            } else {
                showStatus('âŒ BackButton ë¯¸ì§€ì›', 'error');
            }
        };

        // BackButton - ìˆ¨ê¸°ê¸°
        window.hideBackButton = function () {
            if (tg?.BackButton) {
                tg.BackButton.hide();
                showStatus('â—€ï¸ BackButton ìˆ¨ê¹€', 'info');
                hapticMedium();
            } else {
                showStatus('âŒ BackButton ë¯¸ì§€ì›', 'error');
            }
        };

        // showAlert
        window.showAlertPopup = function () {
            if (tg?.showAlert) {
                tg.showAlert('ì´ê²ƒì€ Alert íŒì—…ì…ë‹ˆë‹¤!', () => {
                    showStatus('âœ… Alert í™•ì¸ë¨', 'success');
                    hapticSuccess();
                });
            } else {
                alert('showAlert ë¯¸ì§€ì› (ì¼ë°˜ alert ì‚¬ìš©)');
                showStatus('âš ï¸ showAlert ë¯¸ì§€ì›', 'error');
            }
        };

        // showConfirm
        window.showConfirmPopup = function () {
            if (tg?.showConfirm) {
                tg.showConfirm('í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?', (result) => {
                    if (result) {
                        showStatus('âœ… Confirm: í™•ì¸', 'success');
                        hapticSuccess();
                    } else {
                        showStatus('âŒ Confirm: ì·¨ì†Œ', 'info');
                        hapticError();
                    }
                });
            } else {
                const result = confirm('showConfirm ë¯¸ì§€ì› (ì¼ë°˜ confirm ì‚¬ìš©)');
                showStatus(result ? 'âœ… í™•ì¸' : 'âŒ ì·¨ì†Œ', result ? 'success' : 'info');
            }
        };

        // showPopup (ì»¤ìŠ¤í…€)
        window.showPopupDemo = function () {
            if (tg?.showPopup) {
                tg.showPopup({
                    title: 'ì»¤ìŠ¤í…€ íŒì—…',
                    message: 'ì´ê²ƒì€ showPopupìœ¼ë¡œ ë§Œë“  ì»¤ìŠ¤í…€ íŒì—…ì…ë‹ˆë‹¤.',
                    buttons: [
                        { id: 'ok', type: 'ok', text: 'í™•ì¸' },
                        { id: 'cancel', type: 'cancel' },
                        { id: 'close', type: 'close' }
                    ]
                }, (buttonId) => {
                    showStatus(`ğŸ”˜ ë²„íŠ¼ í´ë¦­: ${buttonId}`, 'info');
                    hapticMedium();
                });
            } else {
                showStatus('âŒ showPopup ë¯¸ì§€ì› (TMA 6.2+)', 'error');
            }
        };

        // í…Œë§ˆ ìƒ‰ìƒ í‘œì‹œ
        function displayThemeColors() {
            if (!tg) return;

            const themeParams = tg.themeParams || {};
            const colors = [
                { name: 'bg_color', label: 'ë°°ê²½ìƒ‰' },
                { name: 'text_color', label: 'í…ìŠ¤íŠ¸' },
                { name: 'hint_color', label: 'íŒíŠ¸' },
                { name: 'link_color', label: 'ë§í¬' },
                { name: 'button_color', label: 'ë²„íŠ¼' },
                { name: 'button_text_color', label: 'ë²„íŠ¼ í…ìŠ¤íŠ¸' },
                { name: 'secondary_bg_color', label: 'ë³´ì¡° ë°°ê²½' }
            ];

            const container = document.getElementById('themeColors');
            container.innerHTML = '';

            colors.forEach(({ name, label }) => {
                const value = themeParams[name] || '#cccccc';
                const box = document.createElement('div');
                box.className = 'color-box';
                box.innerHTML = `
                    <div class="color-preview" style="background: ${value};"></div>
                    <div class="color-label">${label}:</div>
                    <div class="color-value">${value}</div>
                `;
                container.appendChild(box);
            });
        }

        // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
        function showStatus(message, type = 'info') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
            statusEl.style.display = 'block';

            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 3000);
        }

        // ì´ˆê¸°í™” ì‹¤í–‰
        init();

        console.log('='.repeat(60));
        console.log('ğŸ¨ TMA UI ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸');
        console.log('='.repeat(60));
        console.log('WebApp:', tg);
        console.log('Version:', tg?.version);
        console.log('ThemeParams:', tg?.themeParams);
        console.log('='.repeat(60));
    </script>
</body>

</html>